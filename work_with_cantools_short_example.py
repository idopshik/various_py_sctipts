import cantools
import can
from pprint import pprint
db = cantools.database.load_file('res_files/MSRS_ESC_ALL_AV3_MESSAGE_LIST_AV3 draft__14_02_2023.dbc')
#  print(db.messages)

#  example_message = db.get_message_by_name('ExampleMessage')
#  pprint(example_message.signals)



datas_with_error_EAURA = [
    [0x0a, 0xeb, 0x00, 0x44, 0xcc, 0x90, 0x1c, 0x00],
    [0x0a, 0xe0, 0x00, 0x45, 0x36, 0xc0, 0x04, 0x00],
    [0x0a, 0xe6, 0x00, 0x45, 0x36, 0xc0, 0x2a, 0x00],
    [0x0a, 0xe0, 0x00, 0x45, 0x36, 0xc0, 0x12, 0x00],
    [0x0a, 0xd5, 0x00, 0x45, 0x36, 0xc0, 0x38, 0x00],
    [0x0A, 0xCF, 0x00, 0x45, 0x36, 0xC0, 0x20, 0x00],
]

# зачем-то и в абхазии случалось повышение на 7 км.ч
abkhazia_XGF = [
    [0x18, 0x8B, 0x04, 0x57, 0x39, 0x70, 0x2C, 0x00],
    [0x18, 0x8B, 0x04, 0x57, 0x39, 0x80, 0x2C, 0x00],
    #   [0x00, 0xB1, 0xD2
    [0x18, 0x8B, 0x04, 0x57, 0x60, 0x80, 0x2C, 0x00],
    #   [0x00, 0xB1, 0xD2
    [0x18, 0x96, 0x04, 0x57, 0x60, 0x80, 0x2E, 0x00],
    #   [0x00, 0xB1, 0xD2
    [0x18, 0x96, 0x04, 0x57, 0x60, 0x80, 0x2E, 0x00],
    [0x18, 0xAC, 0x04, 0x57, 0x60, 0x80, 0x30, 0x00],
]




for data in abkhazia_XGF:
    message = can.Message(arbitration_id=0x5D7, data=data)

    distance = db.decode_message(message.arbitration_id, message.data).get("DistanceTotalizer")
    print(distance)


#  can_bus.send(message)
